"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onCreateWebpackConfig = void 0;

var _node = require("../node");

const onCreateWebpackConfig = config => ({
  webpackConfig: defaultWebpackConfig,
  stage
}) => {
  const webpackConfig = defaultWebpackConfig;
  const actions = {
    setWebpackConfig(config) {
      if (config.plugins) {
        config.plugins.forEach(plugin => webpackConfig.plugins.push(plugin));
      }

      if (config.module && config.module.rules) {
        config.module.rules.forEach(rule => webpackConfig.module.rules.push(rule));
      }
    }

  };
  (0, _node.applyHook)(config, 'onCreateWebpackConfig', {
    getConfig() {
      return webpackConfig;
    },

    stage,
    actions
  });
  return webpackConfig;
};

exports.onCreateWebpackConfig = onCreateWebpackConfig;